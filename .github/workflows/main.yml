name: test
on:
 push:
  branches:
   - main
env:
  bucket: codepipeline-us-east-1-535271855363 
  
jobs:
  s3packageupload:
   runs-on: ubuntu-latest
   steps:
    - name: git clone the repository
      uses: actions/checkout@v3
    - name: "Configure AWS Credentials" 
      uses: aws-actions/configure-aws-credentials@v1
      with:
        aws-access-key-id: ${{ secrets.aws_access_key_id }}
        aws-secret-access-key: ${{ secrets.aws_secrest_access_key }}
        aws-region: ${{ secrets.aws_region }}
    - run: aws cp . s3://${{ env.bucket }}/ {{  github.head_ref }}/
